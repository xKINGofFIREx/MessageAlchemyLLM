
# MessageAlchemyLLM: Shiny-приложение для анализа новостных сообщений из Telegram

MessageAlchemyLLM представляет собой веб-приложение, разработанное с использованием R и библиотеки Shiny, предназначенное для проведения анализа сообщений, полученных из новостных Telegram-каналов. Приложение выполняет анализ тональности, агрегирует статистику активности по дням, формирует текстовые резюме и экспортирует результаты в формате RSS.

## Описание функциональности

- Анализ тональности сообщений (определение позитивной, нейтральной и негативной оценки).
- Подсчёт количества сообщений по дням для оценки активности каналов.
- Генерация ежедневных текстовых дайджестов.
- Экспорт результатов в формате RSS (файл `feed.xml`).
- Отображение анализа через веб-интерфейс Shiny.

## Установка и запуск

1. Клонируйте репозиторий:

```bash
git clone https://github.com/xKINGofFIREx/MessageAlchemyLLM.git
cd MessageAlchemyLLM
```

2. Установите зависимости:

```r
Rscript requirements.R
```

3. Убедитесь, что установлен и запущен локальный сервер Ollama:

```bash
ollama serve &
```
4. Настройте автоматический сбор сообщений из Telegram

```r
source("R/schedule.R")
setup_schedule()
```
Внутри функции setup_schedule() можно указать параметр "hour", в котором указать время автоматического сбора сообщений (по умолчанию "hour=10")

5. Поместите файлы с сообщениями Telegram (в формате JSON) в директорию `data/`.

6. Выполните сборку проекта:

```r
Rscript build.R
```

7. Запустите веб-интерфейс:

```r
shiny::runApp("app")
```

## Требования

- R версии 4.0 и выше
- RStudio
- Локально установленный сервер Ollama с предобученной моделью, поддерживающей анализ текста на русском языке
- Альтернативно: API Hugging Face с прописанным `HF_TOKEN` в `.Renviron` и адаптированным кодом в `R/summarization.R`

## Архитектура проекта

```
MessageAlchemyLLM/
├── build.R               # Скрипт полной сборки проекта
├── app/                  
│   └── app.R             # Интерфейс и серверная логика приложения Shiny
├── R/                    # Модули обработки данных
│   ├── etl.R             # Предобработка и очистка Telegram JSON
│   ├── get_messages.R    # Получение и агрегация сообщений
│   ├── rss_generator.R   # Генерация RSS-ленты на основе анализа
│   ├── sentiment.R       # Классификация сообщений по тональности
│   └── summarization.R   # Генерация кратких резюме и дайджестов
├── data/                 # Каталог с входными и выходными данными
│   ├── telegram_messages_*.json   # Исходные данные (экспорт из Telegram)
│   ├── messages.rds               # Обработанный датафрейм сообщений
│   ├── summaries.rds              # Дайджесты по дням и каналам
│   └── feed.xml                   # RSS-лента с результатами
├── requirements.R        # Сценарий установки зависимостей (CRAN-пакеты)
└── README.md             # Документация проекта
```

## Поток обработки данных

Файлы сообщений (`*.json`)
Предобработка (`etl.R`)
Анализ тональности и генерация дайджестов (`summarization.R`)  
Сохранение результатов (`messages.rds`, `summaries.rds`) 
Экспорт RSS (`rss_generator.R`)  
Отображение в веб-интерфейсе (`app/app.R`)
